

# **NII Dashboard**

A modular, transparent, and extensible tool for calculating and visualizing **Net Interest Income (NII)** for a portfolio of loans and deposits.  
The project is designed for autonomous coding agents and human developers working collaboratively on the repository:

ðŸ‘‰ **https://github.com/AutoNaver/NII**

The dashboard computes realized and accrued interest using the **30/360 dayâ€‘count convention**, supports fixed and floating coupons, and allows users to compare portfolio states across different monthâ€‘end dates.

---

## **ðŸ“Œ Key Features**

### **1. Endâ€‘ofâ€‘Month View**
Select any monthâ€‘end date and the dashboard will compute:

- Realized NII for the previous month  
- Active deals at monthâ€‘end  
- Accrued interest up to the selected date  
- Monthly volumes and weighted average coupons  

### **2. Comparison Mode**
Select a second monthâ€‘end date to compare:

- NII differences  
- Dealâ€‘level changes (new, matured, modified)  
- Volume and coupon shifts  

### **3. Dealâ€‘Level Difference Visualization**
The dashboard highlights:

- Deals added or removed between dates  
- Notional changes  
- Coupon changes  
- Floatingâ€‘rate index/spread changes  

### **4. EURâ€‘Based Interest Payments**
Interest is displayed in **EUR**, not percentages, ensuring clarity even when:

- Notional = 0  
- Coupons still generate payments  

### **5. Monthly Buckets**
For each month:

- Total active notional  
- Weighted average coupon  
- Total interest paid  

Displayed via intuitive charts and tables.

---

## **ðŸ“‚ Input Data**

The project uses the provided Excel file:

```
Input_Data.xlsx
```

Each row represents a deal with at least:

- `deal_id`  
- `notional` (positive = asset, negative = liability)  
- `coupon`  
- `coupon_type` (fixed / floating)  
- `trade_date`  
- `value_date`  
- `maturity_date`  
- `index` (for floating)  
- `spread`  

All calculations follow the **30/360** convention.

---

## **ðŸ§® Core Calculation Logic**

### **Deal Activation**
A deal is active on date \( t \) if:

\[
\text{value\_date} \le t < \text{maturity\_date}
\]

### **Accrued Interest (30/360)**
Fixed coupon:

\[
\text{Accrued Interest} = \text{Notional} \cdot \text{Coupon} \cdot \frac{\text{Days}_{30/360}}{360}
\]

Floating coupon:

\[
\text{Effective Coupon} = \text{Index}(t) + \text{Spread}
\]

### **Monthly Realized NII**
\[
\text{NII}(M) = \sum_{\text{deals}} \text{Interest Paid in Month M}
\]

---

## **ðŸ—ï¸ Project Structure**

```
/src
    /data
        loader.py
        validator.py
    /models
        deal.py
        portfolio.py
        curves.py
    /calculations
        accrual.py
        nii.py
        volumes.py
    /dashboard
        app.py
        components/
        plots/
    /utils
        date_utils.py
        logging.py

/tests
    test_accrual.py
    test_loader.py
    test_nii.py

/docs
    methodology.md
    dashboard_guide.md
```

---

## **ðŸ¤– Agent Development Guidelines**

Agents working on this repo must follow:

### **Branching**
- Create feature branches:  
  `feature/<agent>/<description>`
- No direct commits to `main`

### **Code Style**
- Python 3.10+  
- Pandas for data  
- Plotly/Altair for charts  
- Streamlit/Dash for UI  
- Full type hints  
- PEP8 compliance  

### **Testing**
- Use `pytest`  
- Add tests for:
  - Dayâ€‘count logic  
  - Accrual calculations  
  - Deal activation  
  - NII aggregation  

### **Documentation**
- Update `README.md` for new features  
- Add detailed explanations to `/docs`  

### **Data Handling**
- Never modify the original Excel input  
- Validate and normalize all fields  
- Log warnings for missing or malformed data  

---

## **ðŸš€ Getting Started**

### **1. Clone the Repository**
```bash
git clone https://github.com/AutoNaver/NII
cd NII
```

### **2. Install Dependencies**
```bash
pip install -r requirements.txt
```

### **3. Run the Dashboard**
```bash
streamlit run src/dashboard/app.py
```

---

## **ðŸ§­ Roadmap**

Planned enhancements:

- Forwardâ€‘looking NII projections  
- Scenario analysis (rate shocks)  
- Floatingâ€‘rate curve integration  
- Dealâ€‘level drillâ€‘down pages  
- Export to Excel/PDF  

---
